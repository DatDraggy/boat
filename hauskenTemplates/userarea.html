<?php
if (!empty($_SESSION['userid'])) {
  $userId = $_SESSION['userid'];
  $dbConnection = buildDatabaseConnection($config);

  if (checkRegValid($userId)) {
    //Display site, do nothing
  }
  else {
    if (isset($_COOKIE[session_name()])) {
      setcookie(session_name(), '', time() - 3600, '/');
    }
    session_destroy();
    header('Location: login.html');
    die();
  }
}

?>
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hot Summer Nights: Furry Bo.at Party</title>
    <script src="js/yall-2.2.0.min.js"></script>
    <link rel="stylesheet" href="css/css.css">
    <link rel="stylesheet" href="css/badger-accordion.css">
    <link rel="stylesheet" href="css/line-awesome.min.css">
  </head>
  <body class="hasNav">
    <script src="js/vue.js"></script>
    <div id="app">
      <nav id="nav" class="nav inactive">
        <div class="wrapper">
          <div class="navContent">
            <button class="navItem js-showNav">
              <i class="la la-bars"></i><span>Menu</span>
            </button>

            <div class="navLinks">
              <div class="navItem navItemLogo">
                <a class="navLink" href="/"><img src="images/logo@2x.png" width="48"><p style="margin-left: 1rem;" class="heading5 subheadline nomargin">Hot Summer Nights</p></a>
              </div>
              <div class="navItem">
                <a class="navLink" href="#about">About</a>
              </div>
              <div class="navItem">
                <a class="navLink" href="#tickets">Tickets</a>
              </div>
              <div class="navItem">
                <a class="navLink" href="#faq">FAQ</a>
              </div>
              <div class="navItem">
                <a class="navLink" href="#team">Team</a>
              </div>
              <div class="navItem">
                <a class="navLink" href="https://berlincodeofconduct.org/" target="_blank">Conduct</a>
              </div>
            </div>
            <div class="navButtons">
              <div class="navItem">
                <a class="button navItemButton buttonPrimary" href="/register.html"><i style="font-size: 24px; margin-right: .5rem; margin-top:-4px;" class="la la-ticket"></i>Register</a>
              </div>
              <div class="navItem">
                <a class="button navItemButton buttonSecondary" href="#"><i style="font-size: 24px; margin-right: .5rem; margin-top:-4px;" class="la la-key"></i>Login</a>
              </div>
            </div>
          </div>
        </div>
      </nav>
	  
      <section id="contentPage">

        <section id="about" class="ribbon" style="background-color: var(--colorPink)">
          <div class="wrapper">
            <div class="row">
              <div style="color:white" class="content wsLarge">
                <h1>User area</h1>
                <p class="textBig">You can find all your information regarding the registration here. Edit your details, upgrade your ticket or see your payment status.</p>
              </div>
            </div>
          </div>
        </section>
		<section class="wrapper wsLarge">
			<form method="post" action="php/changedetails.php">
			<input name="userId" value="<?php echo $userId; ?> hidden">
			<input name="nickname" value="<?php echo $nickname; ?>">
			<input name="email" value="<?php echo $newEmail; ?>">
			<input name="sponsor" type="checkbox" <?php echo $sponsor; /*ToDo: If was sponsor, disable*/?> >
			<input name="fursuiter" type="checkbox" <?php echo $fursuiter; ?> >
			<input name="password" type="password">
			<input name="passwordVerify" type="password">
			<input name="oldPassword" type="password">
			</form>
		</section>
        <section id="footer">
          <div class="footer" style="background-color: var(--colorPurple); color: white;">
            <div class="wrapper row">
              <div class="content">
                <p>Content Copyright &copy; Summerbo.at Organization Group 2018-19, <br>
                  Website by Hunter, Kieran and Hausken
                </p>
              </div>
            </div>
          </div>
        </section>
      </section> <!--pageWrapper -->
    </div> <!-- App -->
  <script>document.addEventListener("DOMContentLoaded", yall);</script>
  <script src="js/badger-accordion.min.js"></script>
  <script src="js/app.js"></script>
  </body>
</html>
